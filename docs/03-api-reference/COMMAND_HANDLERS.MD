# BUMBA Command Handlers

BUMBA provides different command handler implementations for various use cases and deployment scenarios.

## Command Handler Hierarchy

### Primary Handler: `command-handler.js` ğŸ
**Purpose**: Full-featured command processing with parallel coordination  
**Commands**: 66 registered commands  
**Features**:
- ğŸ Parallel agent coordination
- ğŸ File locking and territory management
- ğŸ Department routing (Product, Design, Backend)
- ğŸ Advanced error handling and logging
- ğŸ Hook system integration
- ğŸ Performance monitoring

**Usage**:
```javascript
const BumbaCommandHandler = require('./command-handler');
const handler = new BumbaCommandHandler();
```

**Recommended For**: Production deployments, full framework usage

---

### Lightweight Handler: `simple-command-handler.js` ğŸŸ¢
**Purpose**: Streamlined command processing without coordination overhead  
**Commands**: Core essential commands  
**Features**:
- ğŸ Basic command routing
- ğŸ Security validation
- ğŸ Error tracking
- ğŸ”´ No parallel coordination
- ğŸ”´ No territory management
- ğŸ”´ Simplified department routing

**Usage**:
```javascript
const { handleCommand } = require('./simple-command-handler');
```

**Recommended For**: Resource-constrained environments, simple deployments, embedded usage

---

### Deprecated Handler: `deprecated/parallel-command-handler.js` ğŸŸ¡
**Status**: DEPRECATED as of Sprint 2A  
**Reason**: Functionality merged into main command-handler.js  
**Removal**: Planned for v2.0.0

## Command Handler Selection Guide

### Use `command-handler.js` when:
- ğŸ Running in production environment
- ğŸ Need parallel agent execution
- ğŸ Multiple users/departments
- ğŸ Complex project requirements
- ğŸ Full framework features needed

### Use `simple-command-handler.js` when:
- ğŸ Resource constraints (memory < 1GB)
- ğŸ Single-user environment
- ğŸ Embedded/IoT deployment
- ğŸ Simple automation tasks
- ğŸ Minimal dependencies preferred

## Implementation Details

### Command Registration
Both handlers support command registration but with different capabilities:

```javascript
// Full handler - with department routing
handler.registerCommand('implement', {
  description: 'Implement feature with full coordination',
  department: 'auto', // Smart routing
  requiresCoordination: true
});

// Simple handler - direct processing
handler.registerCommand('implement', {
  description: 'Implement feature (lightweight)',
  handler: (args, context) => processTask('implement', args, context)
});
```

### Performance Characteristics

| Feature | command-handler.js | simple-command-handler.js |
|---------|-------------------|---------------------------|
| Memory Usage | ~50MB | ~10MB |
| Startup Time | ~2s | ~500ms |
| Command Latency | 100-500ms | 50-100ms |
| Concurrent Commands | Unlimited | Limited |
| Coordination Overhead | Yes | No |

## Migration Guide

### From deprecated parallel-command-handler.js:
```javascript
// Old (deprecated)
const ParallelCommandHandler = require('./parallel-command-handler');

// New (recommended)
const BumbaCommandHandler = require('./command-handler');
```

### Choosing between full and simple:
1. Assess your resource constraints
2. Determine if you need parallel features
3. Consider user/deployment scenario
4. Start with simple, upgrade to full as needed

## API Compatibility

Both active handlers provide compatible APIs for basic operations:
- `registerCommand(name, config)`
- `handleCommand(command, args, context)`
- `getCommands()` - List available commands
- `validateCommand(command)` - Security validation

Advanced features (coordination, territories, parallel execution) are only available in the full command-handler.js.

---

*Unified during Sprint 2A: Command Handler Unification*  
*Primary: command-handler.js (66 commands) â€¢ Lightweight: simple-command-handler.js â€¢ Deprecated: parallel-command-handler.js*